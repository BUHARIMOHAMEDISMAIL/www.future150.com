<div class="page-header">
  <h1>Add/Edit Ranking</h1>
</div>
<form ng-submit="vm.save(vm.ranking)">
  <div class="row">
    <div class="col-xs-12">
      <div class="form-group">
        <label for="year">Year</label>
        <div>
          <label class="radio-inline" ng-repeat="year in vm.rankYears">
            <input type="radio" ng-model="vm.ranking.year" value="{{year}}"> {{year}}
          </label>
        </div>
      </div>
      <div class="form-group">
        <label>Players</label>
        <ul class="list-group" ui-sortable="vm.sortableOptions" ng-model="vm.ranking.players">
          <div class="list-group-item" ng-repeat="playerRanking in vm.ranking.players">
            <div class="row">
              <div class="col-md-2">
                <span class="pull-left">{{playerRanking.rank}}</span>
                <img ng-src="{{playerRanking.player.imageUrl}}" alt="{{playerRanking.player.firstName}} {{playerRanking.player.lastName}}" class="list-group-item-text img-rounded img-responsive">
              </div>
              <div class="col-md-8">
                <h1 class="list-group-item-heading">{{playerRanking.player.firstName}} {{playerRanking.player.lastName}}</h1>
                <p class="list-group-item-text">{{playerRanking.player.position}}</p>
              </div>
              <div class="col-md-2">
                <a class="btn btn-default" ng-click="vm.remove(playerRanking)">Remove</a>
              </div>
            </div>
          </div>
          <div class="list-group-item unsortable">
            <div class="row">
              <div class="col-md-2">
                <img ng-src="{{vm.newPlayer.imageUrl}}" alt="{{vm.newPlayer.firstName}} {{vm.newPlayer.lastName}}" class="list-group-item-text img-rounded img-responsive">
              </div>
              <div class="col-md-8">
                <ui-select ng-model="vm.newPlayer">
                    <ui-select-match>
                        <span>{{vm.newPlayer.firstName}} {{vm.newPlayer.lastName}}</span>
                    </ui-select-match>
                    <ui-select-choices repeat="player in vm.players" refresh="vm.refreshPlayers($select.search)" refresh-delay="0">
                        <span>{{player.firstName}} {{player.lastName}}</span>
                    </ui-select-choices>
                </ui-select>
              </div>
              <div class="col-md-2">
                <a class="btn btn-default" ng-click="vm.add(vm.newPlayer)">Add</a>
              </div>
            </div>
          </div>
        </ul>
      </div>
      <button type="submit" class="btn btn-primary">Save</button>
      <a ui-sref="nationalRankings" class="btn btn-default">Cancel</a>
    </div>
  </div>
</form>
